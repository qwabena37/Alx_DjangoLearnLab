{% extends "blog/base.html" %}

{% block content %}
<div class="container py-5">
    <div class="alert alert-warning text-center mb-4">
        <h2 class="mb-3">You are about to delete this comment: "{{ comment.content }}"</h2>
        <p>Are you sure you want to proceed? This action cannot be undone.</p>
        <!-- Display post details -->
        <div>
            <p>This comment belongs to the post: <a href="{{ post.get_absolute_url }}">{{ post.title }}</a></p>
            <p>Author: {{ post.author }}</p>
            <p>Published Date: {{ post.published_date|date }}</p>
        </div>
        <!-- Post content here -->
<h1>{{ post.title }}</h1>
<p>{{ post.content }}</p>

<hr>

<h3>Comments ({{ comments.count }})</h3>

<div id="comments">
  {% for comment in comments %}
    <div class="comment" id="comment-{{ comment.pk }}">
      <p><strong>{{ comment.author }}</strong> <small>{{ comment.created_at }}</small></p>
      <p>{{ comment.content }}</p>

      {% if user == comment.author %}
        <p>
          <a href="{% url 'comment-update' comment.pk %}">Edit</a>
          <a href="{% url 'comment-delete' comment.pk %}">Delete</a>
        </p>
      {% endif %}
      <hr>
    </div>
  {% empty %}
    <p>No comments yet â€” be the first to comment!</p>
  {% endfor %}
</div>

{% if user.is_authenticated %}
  <form method="post">
    {% csrf_token %}
    {{ comment_form.as_p }}
    <button type="submit">Post comment</button>
  </form>
{% else %}
  <p><a href="{% url 'login' %}?next={{ request.path }}">Log in</a> to comment.</p>
{% endif %}

    </div>
    <form method="post" class="bg-white p-4 border rounded shadow-sm">
        {% csrf_token %}
        {{ form.as_p}}
        <div class="form-group mt-3">
            <input type="submit" value="Confirm" class="btn btn-danger w-100">
        </div>
    </form>
</div>
{% endblock content %}